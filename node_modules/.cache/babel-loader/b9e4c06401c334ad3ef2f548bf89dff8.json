{"ast":null,"code":"var _jsxFileName = \"/srv/www/latihan/hello-typescript/src/component/product/productList.tsx\";\nimport React, { Component } from \"react\";\nimport fetchProductList from \"../../api_calls/productList\";\nexport default class ProductList extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      page: 1,\n      perPage: 4,\n      totalProducts: 0,\n      productList: []\n    };\n\n    this.trackScrolling = () => {\n      const wrappedElement = document.getElementById('productList');\n\n      if (this.isBottom(wrappedElement)) {\n        console.log(this.state.page + 1);\n        this.setState({\n          page: this.state.page + 1\n        });\n        this.componentDidMount();\n        document.removeEventListener('scroll', this.trackScrolling);\n      }\n    };\n  }\n\n  async componentDidMount() {\n    try {\n      let result = await fetchProductList(this.state.page, this.state.perPage);\n      let resultJSON = await result.json();\n\n      if (result.ok) {\n        this.setState({\n          productList: resultJSON.products,\n          totalProducts: resultJSON.paging.total\n        });\n      } else {// Handle your error here\n      }\n    } catch (err) {// Handle your error here\n    }\n\n    document.addEventListener('scroll', this.trackScrolling);\n  }\n\n  isBottom(el) {\n    return el.getBoundingClientRect().bottom <= window.innerHeight;\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.trackScrolling);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      id: \"productList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, this.state.productList.map((product, index) => {\n      return React.createElement(\"div\", {\n        key: index,\n        className: \"col s6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: product.images[0],\n        alt: \"Product\",\n        className: \"responsive-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, product.title), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, product.price));\n    })));\n  }\n\n}","map":{"version":3,"sources":["/srv/www/latihan/hello-typescript/src/component/product/productList.tsx"],"names":["React","Component","fetchProductList","ProductList","state","page","perPage","totalProducts","productList","trackScrolling","wrappedElement","document","getElementById","isBottom","console","log","setState","componentDidMount","removeEventListener","result","resultJSON","json","ok","products","paging","total","err","addEventListener","el","getBoundingClientRect","bottom","window","innerHeight","componentWillUnmount","render","map","product","index","images","title","price"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAGA,OAAOC,gBAAP,MAA6B,6BAA7B;AAEA,eAAe,MAAMC,WAAN,SAA0BF,SAA1B,CAA+D;AAAA;AAAA;AAAA,SAE5EG,KAF4E,GAE9C;AAC5BC,MAAAA,IAAI,EAAE,CADsB;AAE5BC,MAAAA,OAAO,EAAE,CAFmB;AAG5BC,MAAAA,aAAa,EAAE,CAHa;AAI5BC,MAAAA,WAAW,EAAE;AAJe,KAF8C;;AAAA,SAmC5EC,cAnC4E,GAmC3D,MAAM;AACrB,YAAMC,cAAc,GAAGC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAvB;;AACA,UAAI,KAAKC,QAAL,CAAcH,cAAd,CAAJ,EAAmC;AAC/BI,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAL,CAAWC,IAAX,GAAkB,CAA9B;AACA,aAAKW,QAAL,CAAc;AACVX,UAAAA,IAAI,EAAE,KAAKD,KAAL,CAAWC,IAAX,GAAkB;AADd,SAAd;AAGF,aAAKY,iBAAL;AACAN,QAAAA,QAAQ,CAACO,mBAAT,CAA6B,QAA7B,EAAuC,KAAKT,cAA5C;AACD;AACF,KA7C2E;AAAA;;AAQ5E,QAAMQ,iBAAN,GAA0B;AACxB,QAAI;AACF,UAAIE,MAAM,GAAG,MAAMjB,gBAAgB,CAAC,KAAKE,KAAL,CAAWC,IAAZ,EAAkB,KAAKD,KAAL,CAAWE,OAA7B,CAAnC;AACA,UAAIc,UAA4B,GAAG,MAAMD,MAAM,CAACE,IAAP,EAAzC;;AAEA,UAAIF,MAAM,CAACG,EAAX,EAAe;AACb,aAAKN,QAAL,CAAc;AACZR,UAAAA,WAAW,EAAEY,UAAU,CAACG,QADZ;AAEZhB,UAAAA,aAAa,EAAEa,UAAU,CAACI,MAAX,CAAkBC;AAFrB,SAAd;AAID,OALD,MAKO,CACL;AACD;AACF,KAZD,CAYE,OAAMC,GAAN,EAAW,CACX;AACD;;AACDf,IAAAA,QAAQ,CAACgB,gBAAT,CAA0B,QAA1B,EAAoC,KAAKlB,cAAzC;AACD;;AAEDI,EAAAA,QAAQ,CAACe,EAAD,EAAU;AAChB,WAAOA,EAAE,CAACC,qBAAH,GAA2BC,MAA3B,IAAqCC,MAAM,CAACC,WAAnD;AACD;;AAEDC,EAAAA,oBAAoB,GAAG;AACrBtB,IAAAA,QAAQ,CAACO,mBAAT,CAA6B,QAA7B,EAAuC,KAAKT,cAA5C;AACD;;AAcDyB,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAA2B,MAAA,EAAE,EAAC,aAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEE,KAAK9B,KAAL,CAAWI,WAAX,CAAuB2B,GAAvB,CAA2B,CAACC,OAAD,EAAUC,KAAV,KAA4B;AACrD,aACE;AAAK,QAAA,GAAG,EAAEA,KAAV;AAAiB,QAAA,SAAS,EAAC,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,GAAG,EAAED,OAAO,CAACE,MAAR,CAAe,CAAf,CAAV;AAA6B,QAAA,GAAG,EAAC,SAAjC;AAA2C,QAAA,SAAS,EAAC,gBAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAMF,OAAO,CAACG,KAAd,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAMH,OAAO,CAACI,KAAd,CAHF,CADF;AAOD,KARD,CAFF,CADF,CADF;AAiBD;;AAjE2E","sourcesContent":["import React, { Component } from \"react\"\n\nimport { ProductListStateType, responseJSONType } from \"./productTypes\";\nimport fetchProductList from \"../../api_calls/productList\";\n\nexport default class ProductList extends Component<any, ProductListStateType> {\n\n  state: ProductListStateType = {\n    page: 1,\n    perPage: 4,\n    totalProducts: 0,\n    productList: [],\n  }\n  async componentDidMount() {\n    try {\n      let result = await fetchProductList(this.state.page, this.state.perPage)\n      let resultJSON: responseJSONType = await result.json()\n\n      if (result.ok) {\n        this.setState({ \n          productList: resultJSON.products, \n          totalProducts: resultJSON.paging.total \n        })\n      } else {\n        // Handle your error here\n      }\n    } catch(err) {\n      // Handle your error here\n    }\n    document.addEventListener('scroll', this.trackScrolling);\n  }\n\n  isBottom(el: any) {\n    return el.getBoundingClientRect().bottom <= window.innerHeight;\n  }\n  \n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.trackScrolling);\n  }\n  \n  trackScrolling = () => {\n    const wrappedElement = document.getElementById('productList');\n    if (this.isBottom(wrappedElement)) {\n        console.log(this.state.page + 1)\n        this.setState({ \n            page: this.state.page + 1\n          })\n      this.componentDidMount();\n      document.removeEventListener('scroll', this.trackScrolling);\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"container\" id=\"productList\">\n        <div className=\"row\">\n        {\n          this.state.productList.map((product, index: number) => {\n            return (\n              <div key={index} className=\"col s6\">\n                <img src={product.images[0]} alt=\"Product\" className=\"responsive-img\"/>      \n                <div>{product.title}</div>\n                <div>{product.price}</div>\n              </div>\n            )\n          })\n        }\n        </div>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}