{"ast":null,"code":"var _jsxFileName = \"/srv/www/latihan/hello-typescript/src/component/product/productList.tsx\";\nimport React, { Component } from \"react\";\nimport fetchProductList from \"../../api_calls/productList\";\nimport fetchProductSearch from \"../../api_calls/productSearch\";\nexport default class ProductList extends Component {\n  async componentDidMount() {\n    try {\n      let result = await fetchProductList(this.state.page, this.state.perPage);\n      let resultJSON = await result.json();\n\n      if (result.ok) {\n        this.setState({\n          productList: resultJSON.products,\n          totalProducts: resultJSON.paging.total\n        });\n      } else {// Handle your error here\n      }\n    } catch (err) {// Handle your error here\n    }\n\n    document.addEventListener('scroll', this.trackScrolling);\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      page: 1,\n      perPage: 4,\n      totalProducts: 0,\n      productList: [],\n      searchQuery: \"\"\n    };\n\n    this.trackScrolling = () => {\n      const wrappedElement = document.getElementById('productList');\n\n      if (this.isBottom(wrappedElement)) {\n        this.setState({\n          perPage: this.state.perPage + 4\n        });\n        this.componentDidMount();\n        document.removeEventListener('scroll', this.trackScrolling);\n      }\n    };\n\n    this.state = {\n      page: 1,\n      perPage: 4,\n      totalProducts: 0,\n      productList: [],\n      searchQuery: \"\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSearch = this.handleSearch.bind(this);\n  }\n\n  handleChange(e) {\n    this.setState({\n      searchQuery: e.target.value\n    });\n  }\n\n  async handleSearch(event) {\n    event.preventDefault();\n\n    try {\n      console.log('masuk');\n      let result = await fetchProductSearch(this.state.searchQuery);\n      let resultJSON = await result.json();\n\n      if (result.ok) {\n        this.setState({\n          productList: resultJSON.products,\n          totalProducts: resultJSON.paging.total\n        });\n      } else {// Handle your error here\n      }\n    } catch (err) {\n      // Handle your error here\n      console.log(err);\n    }\n\n    document.removeEventListener('scroll', this.trackScrolling);\n  }\n\n  isBottom(el) {\n    return el.getBoundingClientRect().bottom <= window.innerHeight;\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.trackScrolling);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      id: \"productList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSearch,\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      onChange: this.handleChange,\n      className: \"input-field col s9\",\n      type: \"search\",\n      placeholder: \"SEARCH\",\n      \"aria-label\": \"Search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      onClick: this.handleSearch,\n      type: \"submit\",\n      className: \"col s2 waves-effect waves-light btn push-s1\",\n      value: \"submit\",\n      style: {\n        height: '3rem',\n        border: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, this.state.productList.map((product, index) => {\n      return React.createElement(\"div\", {\n        key: index,\n        className: \"col s6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: product.images[0],\n        alt: \"Product\",\n        className: \"responsive-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, product.title), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, product.price));\n    })));\n  }\n\n}","map":{"version":3,"sources":["/srv/www/latihan/hello-typescript/src/component/product/productList.tsx"],"names":["React","Component","fetchProductList","fetchProductSearch","ProductList","componentDidMount","result","state","page","perPage","resultJSON","json","ok","setState","productList","products","totalProducts","paging","total","err","document","addEventListener","trackScrolling","constructor","props","searchQuery","wrappedElement","getElementById","isBottom","removeEventListener","handleChange","bind","handleSearch","e","target","value","event","preventDefault","console","log","el","getBoundingClientRect","bottom","window","innerHeight","componentWillUnmount","render","height","border","map","product","index","images","title","price"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\n\nimport { ProductListStateType, responseJSONType } from \"./productTypes\";\nimport fetchProductList from \"../../api_calls/productList\";\nimport fetchProductSearch from \"../../api_calls/productSearch\";\n\nexport default class ProductList extends Component<any, ProductListStateType> {\n\n  state: ProductListStateType = {\n    page: 1,\n    perPage: 4,\n    totalProducts: 0,\n    productList: [],\n    searchQuery: \"\"\n  }\n  async componentDidMount() {\n    try {\n      let result = await fetchProductList(this.state.page, this.state.perPage)\n      let resultJSON: responseJSONType = await result.json()\n\n      if (result.ok) {\n        this.setState({ \n          productList: resultJSON.products, \n          totalProducts: resultJSON.paging.total \n        })\n      } else {\n        // Handle your error here\n      }\n    } catch(err) {\n      // Handle your error here\n    }\n    document.addEventListener('scroll', this.trackScrolling);\n  }\n  constructor(props: any) {\n    super(props)\n    this.state = {page: 1,\n        perPage: 4,\n        totalProducts: 0,\n        productList: [],\n        searchQuery: \"\"}\n\n    this.handleChange = this.handleChange.bind(this)\n    this.handleSearch = this.handleSearch.bind(this)\n  }\n  handleChange(e : any){\n      this.setState({\n          searchQuery: e.target.value\n      })\n  }\n\n  async handleSearch(event : any) {\n    event.preventDefault()\n    try {\n        console.log('masuk')\n        let result = await fetchProductSearch(this.state.searchQuery)\n        let resultJSON: responseJSONType = await result.json()\n        if (result.ok) {\n          this.setState({ \n            productList: resultJSON.products, \n            totalProducts: resultJSON.paging.total\n          })\n        } else {\n          // Handle your error here\n        }\n      } catch(err) {\n        // Handle your error here\n        console.log(err)\n      }\n      document.removeEventListener('scroll', this.trackScrolling);\n}\n\n  isBottom(el: any) {\n    return el.getBoundingClientRect().bottom <= window.innerHeight;\n  }\n  \n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.trackScrolling);\n  }\n  \n  trackScrolling = () => {\n    const wrappedElement = document.getElementById('productList');\n    if (this.isBottom(wrappedElement)) {\n        this.setState({ \n            perPage: this.state.perPage + 4\n          })\n        this.componentDidMount();\n        document.removeEventListener('scroll', this.trackScrolling);\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"container\" id=\"productList\">\n            <form onSubmit={this.handleSearch} className=\"row\">\n                <input onChange={this.handleChange} className=\"input-field col s9\" type=\"search\" placeholder=\"SEARCH\" aria-label=\"Search\" />\n                <input onClick={this.handleSearch} type=\"submit\" className=\"col s2 waves-effect waves-light btn push-s1\" value=\"submit\" style={{ height: '3rem', border: 'none' }} />\n            </form>\n        <div className=\"row\">\n        {\n          this.state.productList.map((product, index: number) => {\n            return (\n              <div key={index} className=\"col s6\">\n                <img src={product.images[0]} alt=\"Product\" className=\"responsive-img\"/>      \n                <div>{product.title}</div>\n                <div>{product.price}</div>\n              </div>\n            )\n          })\n        }\n        </div>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}