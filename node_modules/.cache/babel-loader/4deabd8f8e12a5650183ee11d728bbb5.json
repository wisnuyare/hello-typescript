{"ast":null,"code":"var _jsxFileName = \"/srv/www/latihan/hello-typescript/src/component/product/productList.tsx\";\nimport React, { Component } from \"react\";\nimport fetchProductList from \"../../api_calls/productList\";\nimport fetchProductSearch from \"../../api_calls/productSearch\";\nexport default class ProductList extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      page: 1,\n      perPage: 4,\n      totalProducts: 0,\n      productList: [],\n      searchQuery: \"\"\n    };\n\n    this.trackScrolling = () => {\n      const wrappedElement = document.getElementById('productList');\n\n      if (this.isBottom(wrappedElement)) {\n        this.setState({\n          perPage: this.state.perPage + 4\n        });\n        this.componentDidMount();\n        document.removeEventListener('scroll', this.trackScrolling);\n      }\n    };\n  }\n\n  async componentDidMount() {\n    try {\n      let result = await fetchProductList(this.state.page, this.state.perPage);\n      let resultJSON = await result.json();\n\n      if (result.ok) {\n        this.setState({\n          productList: resultJSON.products,\n          totalProducts: resultJSON.paging.total\n        });\n      } else {// Handle your error here\n      }\n    } catch (err) {// Handle your error here\n    }\n\n    document.addEventListener('scroll', this.trackScrolling);\n  }\n\n  async handleSearch(event) {\n    event.preventDefault();\n\n    try {\n      let result = await fetchProductSearch(this.state.searchQuery);\n      let resultJSON = await result.json();\n\n      if (result.ok) {\n        this.setState({\n          productList: resultJSON.products,\n          totalProducts: resultJSON.paging.total\n        });\n      } else {// Handle your error here\n      }\n    } catch (err) {// Handle your error here\n    }\n  }\n\n  isBottom(el) {\n    return el.getBoundingClientRect().bottom <= window.innerHeight;\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.trackScrolling);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      id: \"productList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSearch,\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      onChange: e => this.setState({\n        searchQuery: e.target.value\n      }),\n      className: \"input-field col s9\",\n      type: \"search\",\n      placeholder: \"SEARCH\",\n      \"aria-label\": \"Search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      onClick: this.handleSearch,\n      type: \"submit\",\n      className: \"col s2 waves-effect waves-light btn push-s1\",\n      value: \"submit\",\n      style: {\n        height: '3rem',\n        border: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, this.state.productList.map((product, index) => {\n      return React.createElement(\"div\", {\n        key: index,\n        className: \"col s6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: product.images[0],\n        alt: \"Product\",\n        className: \"responsive-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, product.title), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, product.price));\n    })));\n  }\n\n}","map":{"version":3,"sources":["/srv/www/latihan/hello-typescript/src/component/product/productList.tsx"],"names":["React","Component","fetchProductList","fetchProductSearch","ProductList","state","page","perPage","totalProducts","productList","searchQuery","trackScrolling","wrappedElement","document","getElementById","isBottom","setState","componentDidMount","removeEventListener","result","resultJSON","json","ok","products","paging","total","err","addEventListener","handleSearch","event","preventDefault","el","getBoundingClientRect","bottom","window","innerHeight","componentWillUnmount","render","e","target","value","height","border","map","product","index","images","title","price"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\"\n\nimport { ProductListStateType, responseJSONType } from \"./productTypes\";\nimport fetchProductList from \"../../api_calls/productList\";\nimport fetchProductSearch from \"../../api_calls/productSearch\";\n\nexport default class ProductList extends Component<any, ProductListStateType> {\n\n  state: ProductListStateType = {\n    page: 1,\n    perPage: 4,\n    totalProducts: 0,\n    productList: [],\n    searchQuery: \"\"\n  }\n  async componentDidMount() {\n    try {\n      let result = await fetchProductList(this.state.page, this.state.perPage)\n      let resultJSON: responseJSONType = await result.json()\n\n      if (result.ok) {\n        this.setState({ \n          productList: resultJSON.products, \n          totalProducts: resultJSON.paging.total \n        })\n      } else {\n        // Handle your error here\n      }\n    } catch(err) {\n      // Handle your error here\n    }\n    document.addEventListener('scroll', this.trackScrolling);\n  }\n\n  async handleSearch(event : any) {\n    event.preventDefault()\n    try {\n        let result = await fetchProductSearch(this.state.searchQuery)\n        let resultJSON: responseJSONType = await result.json()\n  \n        if (result.ok) {\n          this.setState({ \n            productList: resultJSON.products, \n            totalProducts: resultJSON.paging.total \n          })\n        } else {\n          // Handle your error here\n        }\n      } catch(err) {\n        // Handle your error here\n      }\n}\n\n  isBottom(el: any) {\n    return el.getBoundingClientRect().bottom <= window.innerHeight;\n  }\n  \n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.trackScrolling);\n  }\n  \n  trackScrolling = () => {\n    const wrappedElement = document.getElementById('productList');\n    if (this.isBottom(wrappedElement)) {\n        this.setState({ \n            perPage: this.state.perPage + 4\n          })\n        this.componentDidMount();\n        document.removeEventListener('scroll', this.trackScrolling);\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"container\" id=\"productList\">\n            <form onSubmit={this.handleSearch} className=\"row\">\n                <input onChange={(e) => this.setState({ searchQuery: e.target.value })} className=\"input-field col s9\" type=\"search\" placeholder=\"SEARCH\" aria-label=\"Search\" />\n                <input onClick={this.handleSearch} type=\"submit\" className=\"col s2 waves-effect waves-light btn push-s1\" value=\"submit\" style={{ height: '3rem', border: 'none' }} />\n            </form>\n        <div className=\"row\">\n        {\n          this.state.productList.map((product, index: number) => {\n            return (\n              <div key={index} className=\"col s6\">\n                <img src={product.images[0]} alt=\"Product\" className=\"responsive-img\"/>      \n                <div>{product.title}</div>\n                <div>{product.price}</div>\n              </div>\n            )\n          })\n        }\n        </div>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}